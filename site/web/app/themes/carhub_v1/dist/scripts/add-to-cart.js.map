{"version":3,"sources":["../assets/scripts/add-to-cart.js"],"names":["jQuery","$","wc_add_to_cart_params","document","on","$thisbutton","this","is","attr","removeClass","addClass","data","each","key","value","body","trigger","post","wc_ajax_url","toString","replace","response","error","product_url","window","location","cart_redirect_after_add","cart_url","fragments","cart_hash","event","$button","page","fadeTo","block","message","overlayCSS","opacity","is_cart","parent","find","length","after","i18n_view_cart","replaceWith","stop","css","unblock","load"],"mappings":"AAIAA,OAAA,SAAAC,GAEA,GAAA,mBAAAC,uBACA,OAAA,CAIAD,GAAAE,UAAAC,GAAA,QAAA,sBAAA,WAGA,GAAAC,GAAAJ,EAAAK,KAEA,IAAAD,EAAAE,GAAA,qBAAA,CAEA,IAAAF,EAAAG,KAAA,mBACA,OAAA,CAGAH,GAAAI,YAAA,SACAJ,EAAAK,SAAA,UAEA,IAAAC,KAmCA,OAjCAV,GAAAW,KAAAP,EAAAM,OAAA,SAAAE,EAAAC,GACAH,EAAAE,GAAAC,IAIAb,EAAAE,SAAAY,MAAAC,QAAA,kBAAAX,EAAAM,IAGAV,EAAAgB,KAAAf,sBAAAgB,YAAAC,WAAAC,QAAA,eAAA,eAAAT,EAAA,SAAAU,GAEA,GAAAA,EAIA,MAAAA,GAAAC,OAAAD,EAAAE,iBACAC,OAAAC,SAAAJ,EAAAE,aAKA,QAAArB,sBAAAwB,6BAEAF,OAAAC,SAAAvB,sBAAAyB,cAMA1B,GAAAE,SAAAY,MAAAC,QAAA,iBAAAK,EAAAO,UAAAP,EAAAQ,UAAAxB,OAKA,EAIA,OAAA,IAIAJ,EAAAE,SAAAY,MAAAX,GAAA,gBAAA,SAAA0B,EAAAF,EAAAC,EAAAE,GACA,GAAAC,GAAAR,OAAAC,SAAAN,WAAAC,QAAA,cAAA,gBACAW,OAAA,KAAAA,GAAAA,EAEAA,GACAA,EAAAtB,YAAA,WAIAmB,GACA3B,EAAAW,KAAAgB,EAAA,SAAAf,GACAZ,EAAAY,GAAAH,SAAA,cAKAT,EAAA,6CACAgC,OAAA,MAAA,OACAC,OACAC,QAAA,KACAC,YACAC,QAAA,MAIAN,IAEAA,EAAArB,SAAA,SAGAR,sBAAAoC,SAAA,IAAAP,EAAAQ,SAAAC,KAAA,kBAAAC,QACAV,EAAAW,MAAA,aAAAxC,sBAAAyB,SAAA,6CACAzB,sBAAAyC,eAAA,KAAAzC,sBAAAyC,eAAA,SAKAf,IACA3B,EAAAW,KAAAgB,EAAA,SAAAf,EAAAC,GACAb,EAAAY,GAAA+B,YAAA9B,KAGAb,EAAAE,SAAAY,MAAAC,QAAA,wBAIAf,EAAA,oCAAA4C,MAAA,GAAAC,IAAA,UAAA,KAAAC,UAGA9C,EAAA,oBAAA+C,KAAAhB,EAAA,8BAAA,WACA/B,EAAA,oBAAA4C,MAAA,GAAAC,IAAA,UAAA,KAAAC,UAEA9C,EAAAE,SAAAY,MAAAC,QAAA,yBAGAf,EAAA,gBAAA+C,KAAAhB,EAAA,0BAAA,WACA/B,EAAA,gBAAA4C,MAAA,GAAAC,IAAA,UAAA,KAAAC","file":"add-to-cart.js","sourcesContent":["/* global wc_add_to_cart_params */\n/*!\n * WooCommerce Add to Cart JS\n */\njQuery( function( $ ) {\n\n\tif ( typeof wc_add_to_cart_params === 'undefined' ) {\n\t\treturn false;\n\t}\n\n\t// Ajax add to cart.\n\t$( document ).on( 'click', '.add_to_cart_button', function() {\n\n\t\t// AJAX add to cart request.\n\t\tvar $thisbutton = $( this );\n\n\t\tif ( $thisbutton.is( '.ajax_add_to_cart' ) ) {\n\n\t\t\tif ( ! $thisbutton.attr( 'data-product_id' ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$thisbutton.removeClass( 'added' );\n\t\t\t$thisbutton.addClass( 'loading' );\n\n\t\t\tvar data = {};\n\n\t\t\t$.each( $thisbutton.data(), function( key, value ) {\n\t\t\t\tdata[ key ] = value;\n\t\t\t});\n\n\t\t\t// Trigger event.\n\t\t\t$( document.body ).trigger( 'adding_to_cart', [ $thisbutton, data ] );\n\n\t\t\t// Ajax action.\n\t\t\t$.post( wc_add_to_cart_params.wc_ajax_url.toString().replace( '%%endpoint%%', 'add_to_cart' ), data, function( response ) {\n\n\t\t\t\tif ( ! response ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( response.error && response.product_url ) {\n\t\t\t\t\twindow.location = response.product_url;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Redirect to cart option\n\t\t\t\tif ( wc_add_to_cart_params.cart_redirect_after_add === 'yes' ) {\n\n\t\t\t\t\twindow.location = wc_add_to_cart_params.cart_url;\n\t\t\t\t\treturn;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Trigger event so themes can refresh other areas\n\t\t\t\t\t$( document.body ).trigger( 'added_to_cart', [ response.fragments, response.cart_hash, $thisbutton ] );\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\t});\n\n\t// On \"added_to_cart\"\n\t$( document.body ).on( 'added_to_cart', function( event, fragments, cart_hash, $button ) {\n\t\tvar page = window.location.toString().replace( 'add-to-cart', 'added-to-cart' );\n\t\t$button = typeof $button === 'undefined' ? false : $button;\n\n\t\tif ( $button ) {\n\t\t\t$button.removeClass( 'loading' );\n\t\t}\n\n\t\t// Block fragments class.\n\t\tif ( fragments ) {\n\t\t\t$.each( fragments, function( key ) {\n\t\t\t\t$( key ).addClass( 'updating' );\n\t\t\t});\n\t\t}\n\n\t\t// Block widgets and fragments.\n\t\t$( '.shop_table.cart, .updating, .cart_totals' )\n\t\t\t.fadeTo( '400', '0.6' )\n\t\t\t.block({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\topacity: 0.6\n\t\t\t\t}\n\t\t\t});\n\n\t\tif ( $button ) {\n\t\t\t// Changes button classes.\n\t\t\t$button.addClass( 'added' );\n\n\t\t\t// View cart text.\n\t\t\tif ( ! wc_add_to_cart_params.is_cart && $button.parent().find( '.added_to_cart' ).length === 0 ) {\n\t\t\t\t$button.after( ' <a href=\"' + wc_add_to_cart_params.cart_url + '\" class=\"added_to_cart wc-forward\" title=\"' +\n\t\t\t\t\twc_add_to_cart_params.i18n_view_cart + '\">' + wc_add_to_cart_params.i18n_view_cart + '</a>' );\n\t\t\t}\n\t\t}\n\n\t\t// Replace fragments.\n\t\tif ( fragments ) {\n\t\t\t$.each( fragments, function( key, value ) {\n\t\t\t\t$( key ).replaceWith( value );\n\t\t\t});\n\n\t\t\t$( document.body ).trigger( 'wc_fragments_loaded' );\n\t\t}\n\n\t\t// Unblock.\n\t\t$( '.widget_shopping_cart, .updating' ).stop( true ).css( 'opacity', '1' ).unblock();\n\n\t\t// Cart page elements.\n\t\t$( '.shop_table.cart' ).load( page + ' .shop_table.cart:eq(0) > *', function() {\n\t\t\t$( '.shop_table.cart' ).stop( true ).css( 'opacity', '1' ).unblock();\n\n\t\t\t$( document.body ).trigger( 'cart_page_refreshed' );\n\t\t});\n\n\t\t$( '.cart_totals' ).load( page + ' .cart_totals:eq(0) > *', function() {\n\t\t\t$( '.cart_totals' ).stop( true ).css( 'opacity', '1' ).unblock();\n\t\t});\n\n\t});\n\n});\n"],"sourceRoot":"assets/scripts/"}